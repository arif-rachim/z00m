{"version":3,"sources":["AppContext.js","comp/LoginScreen.js","comp/HomeScreen.js","App.js","serviceWorker.js","index.js"],"names":["AppContext","React","createContext","TOKEN","DEFAULT_STATE","identity","room","token","activeRoom","reducer","state","action","type","disconnect","createParticipantDiv","participantDiv","document","createElement","className","setAttribute","uploadElPosition","el","addEventListener","videoWidth","videoHeight","scale","Math","min","top","toFixed","left","AppContextProvider","children","useReducer","dispatch","videoRef","useRef","a","axios","atob","result","data","handleRemoteParticipant","container","participant","id","sid","name","innerText","appendChild","addTrack","track","attach","tracks","forEach","publication","isSubscribed","on","detach","remove","getElementById","createLocalTracks","audio","video","facingMode","localTrack","find","kind","connect","catch","error","console","message","current","hasChildNodes","localEl","handleParticipant","participants","window","Provider","value","getRoomToken","startVideo","connectToRoom","leaveRoom","style","position","width","height","STROOMER","TESTER","Alert","props","elevation","variant","LoginScreen","useContext","useState","requestToLogin","setRequestToLogin","phoneNo","setPhoneNo","setIdentity","openSnackbar","setOpenSnackBar","errorMessage","setErrorMessage","isLoading","setIsLoadig","handleClose","showError","event","preventDefault","phone","target","elements","phoneNumber","length","phoneDigit","substring","JSON","parse","indexOf","alignItems","justifyContent","display","background","border","flexDirection","boxShadow","onClick","version","viewBox","d","stroke","fill","fillRule","textAlign","fontSize","marginBottom","onSubmit","onLogin","backgroundColor","padding","TextField","label","paddingLeft","disabled","onChange","toUpperCase","color","bottom","fontWeight","placeholder","Button","marginTop","CircularProgress","size","Snackbar","open","autoHideDuration","onClose","severity","HomeScreen","useEffect","overflow","ref","flexWrap","right","startIcon","App","Boolean","location","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.dfb42dbe.chunk.js","sourcesContent":["import React, {useReducer, useRef} from \"react\";\r\nimport * as axios from \"axios\";\r\nimport {connect,createLocalTracks} from 'twilio-video';\r\n\r\nexport const AppContext = React.createContext({});\r\n\r\nconst TOKEN = 'aHR0cHM6Ly9kZXNlcnQtY2hpaHVhaHVhLTIxNjMudHdpbC5pby9jcmVhdGUtejAwbS10b2tlbg==';\r\nconst participantBoxSize = 320;\r\nconst DEFAULT_STATE = {\r\n    identity: false,\r\n    room: false,\r\n    token: false,\r\n    activeRoom: false,\r\n};\r\n\r\n/**\r\n * Reducer contains the logic of this application. Reducer accepts two parameters.\r\n * The first parameter is state, and the second is action.\r\n * The state is the n-1 state object, while the action is the event triggered by the producer.\r\n * @param state\r\n * @param action\r\n */\r\nfunction reducer(state, action) {\r\n    switch (action.type) {\r\n        case 'join' :\r\n            return {\r\n                ...state,\r\n                token: action.token,\r\n                room: action.room,\r\n                identity: action.identity,\r\n            };\r\n        case 'set-active-room' :\r\n            return {\r\n                ...state,\r\n                activeRoom: action.activeRoom,\r\n            };\r\n        case 'disconnect':\r\n            state.activeRoom && state.activeRoom.disconnect();\r\n            return DEFAULT_STATE;\r\n    }\r\n    return state;\r\n}\r\n\r\nfunction createParticipantDiv() {\r\n    const participantDiv = document.createElement('div');\r\n    participantDiv.className = 'participant';\r\n    participantDiv.setAttribute('style', `width : ${participantBoxSize}px; height: ${participantBoxSize}px`);\r\n\r\n    return participantDiv;\r\n}\r\n\r\nfunction uploadElPosition(el) {\r\n    el.addEventListener('resize', () => {\r\n        const {videoWidth, videoHeight} = el;\r\n        const minVal = Math.min(videoWidth, videoHeight);\r\n        const scale = participantBoxSize / minVal;\r\n        const top = ((participantBoxSize - (videoHeight)) / 2).toFixed(0);\r\n        const left = ((participantBoxSize - (videoWidth)) / 2).toFixed(0);\r\n        el.setAttribute('style', `top : ${top}px; left : ${left}px; transform : scale(${scale.toFixed(2)})`);\r\n    });\r\n}\r\n\r\n/**\r\n * AppContextProvider contains an object that will be rendered as a React component.\r\n * AppContextProvider will delegate under its context value.\r\n * The context value of AppContextProvider is currently the state and dispatch function.\r\n */\r\nexport default function AppContextProvider({children}) {\r\n    const [state, dispatch] = useReducer(reducer, DEFAULT_STATE);\r\n    const videoRef = useRef();\r\n\r\n    async function getRoomToken({identity, room}) {\r\n\r\n        const result = await axios.post(atob(TOKEN), {\r\n            identity,\r\n            room: room\r\n        });\r\n\r\n        dispatch({type: 'join', token: result.data, identity, room});\r\n    }\r\n\r\n    function handleRemoteParticipant(container) {\r\n        return (participant) => {\r\n            const id = participant.sid;\r\n            const participantDiv = createParticipantDiv();\r\n            participantDiv.id = id;\r\n            const name = document.createElement('h4');\r\n            name.innerText = participant.identity;\r\n            participantDiv.appendChild(name);\r\n            container.appendChild(participantDiv);\r\n            const addTrack = track => {\r\n                const el = track.attach();\r\n                el.className = 'video';\r\n                el.setAttribute('style','width : 100%; height: 100%');\r\n                participantDiv.appendChild(el);\r\n                uploadElPosition(el);\r\n            };\r\n            participant.tracks.forEach(publication => {\r\n                if (publication.isSubscribed) {\r\n                    addTrack(publication.track);\r\n                }\r\n            });\r\n\r\n            // If new tracks get added later, add those, too.\r\n            participant.on('trackSubscribed', addTrack);\r\n\r\n            // When tracks are no longer available, remove the elements displaying them.\r\n            participant.on('trackUnsubscribed', track => {\r\n                // Get a list of elements from detach and remove them from the DOM.\r\n                track.detach().forEach(el => el.remove());\r\n                const container = document.getElementById(id);\r\n                if (container) {\r\n                    container.remove();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    async function connectToRoom() {\r\n        if (!state.token) {\r\n            return;\r\n        }\r\n\r\n        const tracks = await createLocalTracks({\r\n            audio: true,\r\n            video: { facingMode: 'user' }\r\n        });\r\n\r\n        const localTrack = tracks.find(track => track.kind === 'video');\r\n\r\n        const activeRoom = await connect(state.token, {\r\n            name: state.room,\r\n            tracks\r\n        }).catch(error => {\r\n            console.error('Unable to join room', error.message);\r\n        });\r\n\r\n        if (!videoRef.current.hasChildNodes()) {\r\n            const localEl = localTrack.attach();\r\n            localEl.className = 'video';\r\n            const participantDiv = createParticipantDiv();\r\n            participantDiv.appendChild(localEl);\r\n            videoRef.current.appendChild(participantDiv);\r\n            uploadElPosition(localEl);\r\n        }\r\n\r\n        const handleParticipant = handleRemoteParticipant(videoRef.current);\r\n        activeRoom.participants.forEach(handleParticipant);\r\n        activeRoom.on('participantConnected', handleParticipant);\r\n\r\n        // Listen to the \"beforeunload\" event on window to leave the Room\r\n        // when the tab/browser is being closed.\r\n        window.addEventListener('beforeunload', () => activeRoom.disconnect());\r\n\r\n        // iOS Safari does not emit the \"beforeunload\" event on window.\r\n        // Use \"pagehide\" instead.\r\n        window.addEventListener('pagehide', () => activeRoom.disconnect());\r\n\r\n\r\n        dispatch({type: 'set-active-room', activeRoom});\r\n    }\r\n\r\n    const startVideo = () => connectToRoom();\r\n    const leaveRoom = () => dispatch({type: 'disconnect'});\r\n\r\n    return <AppContext.Provider value={{state, getRoomToken, videoRef, startVideo, leaveRoom}}>\r\n        <div style={{position: 'relative', width: '100%', height: '100%'}}>\r\n            {children(state)}\r\n        </div>\r\n    </AppContext.Provider>\r\n}\r\n","import React, {useContext, useState} from 'react';\r\nimport {AppContext} from \"../AppContext\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nconst STROOMER = 'WyIxNzE2MDU1MCIsIjg4ODg0NTIwIiwiOTg1NzMzNzUiLCI4MDA4NDcwOSIsIjE0MDAyNTgyIiwiOTY0NjQ3NDkiLCIwNzc0MzQwMCIsIjExOTQ4NzkyIiwiMTEzMzAyNjgiLCIyNDYwMzU4NCIsIjMwMTkwNzY5IiwiMTE0NjUyMTkiLCI4NDM2Nzk1NSIsIjU4NDI1MzczIiwiMTAzNjk4NzIiLCIwNzg3MjQxMiIsIjgzODI4NTUyIiwiMjEyMzI2NzIiLCIxNjk3NzkwOSIsIjI5ODE3OTk5IiwiNTgwMDUzMTMiLCIxMDY1NzIyNyIsIjA4MDA5NDAwIiwiMTA1NTcwODIiLCI4NTI1NDQ1NiIsIjcwODA2MTAyIiwiMjEzOTgzODkiLCIxOTE5NjI5OSIsIjE1MTcyNjE5IiwiMTcxMjIyODkiLCIyOTczMjkxMyIsIjcyMjQyMzAwIiwiOTY4MzM0OTgiLCI4MjAzNzIwNCIsIjMzNTk3ODk1IiwiOTU4MDE4ODAiLCI1ODgwNTUwNSIsIjA3ODk2NDM4IiwiODIwOTg4MTYiLCIxMTAwMzMyOSIsIjE0ODY0NDY0IiwiOTgwODQ0MzAiLCI4NTE5Mzk4NyIsIjA3ODIyMjk1IiwiNTk3MDI3MTAiLCI1MDM3NzMxNSIsIjUzMTQyOTQzIiwiMjU0Mzg0NjgiLCIxMDQxNDkxOSIsIjg5Nzc3ODEyIiwiMjgyNzU2OTkiLCI1OTk2NTIyNCIsIjE5MDg5OTM4IiwiMTAzNzU5MzkiLCIyMTY3MTM2NyIsIjg4OTY5NDE0IiwiMDUwMDAwNzQiLCI5MTE2ODgyNiIsIjk4NzE2NDM1IiwiNTE0MjkzODMiLCIzMjA3Nzg3OSIsIjUxMTg4MDgyIiwiMTIyNDg5NTUiLCIwMjg5MDg4MSIsIjE2NTg3NTY1IiwiOTEzNDY2NDYiLCIxMTg3MTgwNiIsIjExNzAwMzYwIiwiMTEyMDI2MjkiLCIxMTEwMDI5MyIsIjI5MzAwNzU2IiwiMjcxMDE5ODIiLCI5MDk4NzI4NSIsIjk0NTc5MDA2IiwiMjEyNzMyOTAiLCIxNjgwOTkwOSIsIjAwMTAwMDA5IiwiOTM2MTQ2NTUiLCI0NjA4NDMxMiIsIjkzNjAzMDc5IiwiODgwODQ4ODgiLCIxMTE2MTQxMCIsIjMyNDEyMzYzIiwiMjk2NTExNDUiLCI4MzA4Mjc3NSIsIjA5MDE4MDc1Il0';\r\nconst TESTER = 'WyIwMDEwMDAwOSIsIjA5MDE4MDc1Il0';\r\nfunction Alert(props) {\r\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}\r\n\r\n/**\r\n * The login screen is the first page that users will see if they have never logged in.\r\n * @returns {*}\r\n * @constructor\r\n */\r\nexport default function LoginScreen() {\r\n    const {getRoomToken} = useContext(AppContext);\r\n    const [requestToLogin, setRequestToLogin] = useState(false);\r\n    const [phoneNo, setPhoneNo] = useState('62');\r\n    const [identity, setIdentity] = useState('');\r\n    const [openSnackbar, setOpenSnackBar] = React.useState(false);\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n    const [isLoading,setIsLoadig] = useState(false);\r\n\r\n    const handleClose = () => {\r\n        setOpenSnackBar(false);\r\n    };\r\n\r\n    function showError(message) {\r\n        setErrorMessage(message);\r\n        setOpenSnackBar(true);\r\n    }\r\n\r\n    async function onLogin(event) {\r\n        event.preventDefault();\r\n        const phone = event.target.elements.phoneNumber.value;\r\n        const identity = event.target.elements.identity.value;\r\n        if (identity.length < 4) {\r\n            showError('Minimal nama panggilan terdiri 4 karakter');\r\n            return;\r\n        }\r\n        if (phone.length < 8) {\r\n            showError('Nomer yang anda masukkan tidak valid');\r\n            return;\r\n        }\r\n        const phoneDigit = phone.substring(phone.length - 8, phone.length);\r\n        const isTester = JSON.parse(atob(TESTER)).indexOf(phoneDigit) >= 0;\r\n\r\n        if(isTester){\r\n            setIsLoadig(true);\r\n            await getRoomToken({identity: identity, room: 'z00m'});\r\n            return;\r\n        }\r\n        const isValid = JSON.parse(atob(STROOMER)).indexOf(phoneDigit) >= 0;\r\n        if (!isValid) {\r\n            showError('Maaf nomer anda tidak terdaftar sebagai anggota Str00m');\r\n        } else {\r\n            showError(`${identity} nomer kamu terdaftar sebagai anggota Str00m, tapi sekarang kita lagi masa testing ke sebagian nomer saja, kalau kamu mau ikutan testing hubungi Gorif. Makasih ya !`);\r\n            /**\r\n             * Setelah masa testing ini akan kita enabled\r\n             */\r\n            /*\r\n            setIsLoadig(true);\r\n            await getRoomToken({identity: identity, room: 'z00m'});\r\n             */\r\n        }\r\n\r\n    }\r\n\r\n    return <div\r\n        style={{alignItems: 'center', justifyContent: 'center', display: 'flex', height: '100%', width: '100%'}}>\r\n        <div>\r\n            {!requestToLogin &&\r\n            <div style={{\r\n                background: 'rgba(0,0,0,0.5)',\r\n                border: '2px solid rgba(0,0,0,0.1)',\r\n                height: '20rem',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                boxShadow: '0px 10px 10px -5px rgba(0,0,0,1)'\r\n            }} onClick={(event) => setRequestToLogin(true)}>\r\n                <svg id=\"svg\" version=\"1.1\" viewBox=\"0, 0, 400,486.3157894736842\" height={'100%'}>\r\n                    <g>\r\n                        <path\r\n                            d=\"M175.600 46.479 C 171.783 47.057,168.474 48.385,165.980 50.341 C 164.675 51.363,162.907 52.679,162.049 53.264 C 158.745 55.519,151.600 66.657,151.600 69.551 C 151.600 72.312,154.437 73.752,157.344 72.466 C 159.190 71.649,159.323 71.480,164.142 63.800 C 170.493 53.680,180.835 52.599,193.000 60.783 C 193.880 61.375,196.573 62.904,198.983 64.182 C 201.394 65.459,204.837 67.462,206.634 68.633 C 213.161 72.888,221.693 76.946,227.316 78.470 C 228.902 78.900,230.920 79.446,231.800 79.684 C 234.388 80.384,243.407 80.269,246.200 79.500 C 247.520 79.137,249.507 78.642,250.615 78.401 C 251.723 78.159,253.640 77.295,254.876 76.481 C 256.111 75.666,258.175 74.302,259.461 73.450 C 267.219 68.309,271.495 61.957,269.032 59.235 C 267.392 57.423,263.625 58.229,261.406 60.866 C 260.440 62.013,258.288 63.705,253.607 66.995 C 247.458 71.317,240.577 72.771,231.800 71.603 C 226.062 70.839,211.132 63.344,204.739 58.017 C 202.286 55.974,187.416 47.949,186.152 47.987 C 185.906 47.994,184.646 47.666,183.352 47.258 C 180.237 46.275,178.261 46.076,175.600 46.479 M131.800 114.385 C 91.001 114.648,94.599 114.346,86.630 118.177 C 80.190 121.273,77.201 124.890,74.315 133.077 L 73.073 136.600 72.885 167.436 C 72.656 204.690,72.472 203.330,77.384 200.635 C 78.823 199.846,81.193 198.546,82.652 197.746 L 85.303 196.292 91.552 196.119 C 94.988 196.024,152.520 195.908,219.400 195.862 C 286.280 195.815,341.378 195.633,341.841 195.457 C 344.657 194.387,344.187 189.968,340.434 182.238 C 339.110 179.510,337.680 176.406,337.255 175.339 C 336.831 174.273,335.817 171.870,335.003 170.000 C 334.189 168.130,333.165 165.453,332.728 164.052 C 332.291 162.651,330.778 159.079,329.367 156.115 C 327.955 153.151,326.800 150.658,326.800 150.575 C 326.800 150.282,324.771 145.777,323.839 144.000 C 323.319 143.010,322.758 141.750,322.592 141.200 C 322.426 140.650,321.869 139.277,321.356 138.149 C 320.842 137.022,319.805 134.592,319.052 132.749 C 313.617 119.458,311.969 116.428,309.446 115.084 L 307.800 114.207 237.800 114.180 C 199.300 114.165,151.600 114.257,131.800 114.385 M347.051 225.112 C 346.420 225.195,345.020 225.883,343.940 226.642 C 342.078 227.951,339.608 229.027,334.200 230.886 C 331.127 231.942,324.912 231.963,209.600 231.312 C 72.522 230.538,76.001 230.538,74.559 231.302 C 71.896 232.713,72.070 230.344,71.806 268.755 C 71.543 306.923,71.464 305.433,73.839 306.989 C 74.720 307.566,86.169 307.623,198.704 307.615 L 322.600 307.606 326.200 306.381 C 335.473 303.225,342.985 294.239,343.981 285.109 C 344.191 283.189,344.537 281.291,344.751 280.891 C 344.965 280.491,345.343 277.202,345.591 273.582 C 345.839 269.962,346.196 266.100,346.384 265.000 C 346.573 263.900,346.922 260.660,347.162 257.800 C 347.928 248.647,349.215 235.488,349.627 232.600 C 350.348 227.549,349.403 224.802,347.051 225.112 M73.762 341.242 C 72.846 342.253,72.346 398.617,73.195 405.088 C 74.776 417.131,81.955 424.781,94.400 427.686 C 97.587 428.430,306.598 428.444,309.041 427.700 C 311.279 427.019,312.539 425.742,313.508 423.170 C 313.959 421.977,315.224 419.110,316.320 416.800 C 317.416 414.490,318.875 411.250,319.563 409.600 C 320.251 407.950,321.102 406.060,321.454 405.400 C 321.806 404.740,322.693 402.551,323.427 400.536 C 325.112 395.905,326.419 392.792,328.693 388.000 C 329.684 385.910,330.733 383.570,331.022 382.800 C 332.079 379.992,334.037 375.437,334.365 375.024 C 334.550 374.791,334.834 374.150,334.994 373.600 C 335.155 373.050,336.167 370.593,337.243 368.141 C 338.319 365.689,339.200 363.578,339.200 363.451 C 339.200 363.324,340.122 361.280,341.249 358.910 C 343.675 353.806,344.236 350.471,342.937 348.869 C 341.215 346.744,347.335 346.841,211.995 346.811 C 142.909 346.795,85.995 346.628,85.332 346.438 C 84.295 346.141,78.227 342.645,75.817 340.957 C 74.780 340.230,74.663 340.247,73.762 341.242 \"\r\n                            stroke=\"none\" fill=\"#fbcc07\" fillRule=\"evenodd\"/>\r\n                    </g>\r\n                </svg>\r\n                <label style={{textAlign: 'center', fontSize: '5rem'}}>z00m</label>\r\n                <label style={{textAlign: 'center', marginBottom: '1rem', fontSize: '1rem'}}>\r\n                    Click to Join v1\r\n                </label>\r\n            </div>\r\n            }\r\n            {requestToLogin &&\r\n            <form action=\"\"  onSubmit={(event) => onLogin(event)} style={{\r\n                display: 'flex',\r\n                position :'relative',\r\n                flexDirection: 'column',\r\n                backgroundColor: 'rgba(0,0,0,0.5)',\r\n                padding: '1rem',\r\n                border : '1px solid rgba(0,0,0,0.2)',\r\n                boxShadow: '0px 20px 10px -10px rgba(0,0,0,0.4)'\r\n            }}>\r\n                <TextField label={'Nama Panggilan'}\r\n                           variant={'standard'}\r\n                           type=\"text\"\r\n                           name={'identity'}\r\n                           style={{\r\n                               padding: 5,\r\n                               paddingLeft: 20\r\n                           }}\r\n                           disabled={isLoading}\r\n                           value={identity}\r\n                           onChange={(event) => {\r\n                               setIdentity(event.target.value.toUpperCase());\r\n                           }}\r\n                           />\r\n                <div style={{position: 'relative'}}>\r\n                    <label style={{\r\n                        color: '#FFFFFF',\r\n                        position: 'absolute',\r\n                        bottom: 13,\r\n                        left: '0px',\r\n                        fontSize:'2rem',\r\n                        fontWeight: 'bold'\r\n                    }}>+</label>\r\n                    <TextField label={'Phone No'}\r\n                               variant={'standard'}\r\n                               type=\"text\"\r\n                               name={'phoneNumber'}\r\n                               disabled={isLoading}\r\n                               style={{\r\n\r\n                                   padding: 5,\r\n                                   paddingLeft: 20\r\n                               }}\r\n                               value={phoneNo}\r\n                               onChange={(event) => {\r\n                                   setPhoneNo(event.target.value);\r\n                               }}\r\n                               placeholder={\"62812345678\"}/>\r\n\r\n                </div>\r\n                <Button variant={'contained'} style={{marginTop: '1rem', width: '100%'}} type={'submit'}\r\n                        disabled={isLoading}>Login</Button>\r\n                {isLoading &&\r\n                    <CircularProgress size={'5rem'} style={{position: 'absolute', left: 90, bottom: 80}}/>\r\n                }\r\n            </form>\r\n            }\r\n\r\n        </div>\r\n        <Snackbar open={openSnackbar} autoHideDuration={6000} onClose={handleClose}>\r\n            <Alert onClose={handleClose} severity=\"error\" style={{fontSize:'1.5rem'}}>\r\n                {errorMessage}\r\n            </Alert>\r\n        </Snackbar>\r\n    </div>\r\n}\r\n","/**\r\n * HomeScreen is a component used to render video playback from users who log into a room.\r\n * HomeScreen will be mounted by react if the user has successfully logged in.\r\n */\r\nimport React, {useContext, useEffect} from 'react';\r\nimport {AppContext} from \"../AppContext\";\r\nimport ExitToAppOutlinedIcon from '@material-ui/icons/ExitToAppOutlined';\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nexport default function HomeScreen(){\r\n    const {state,videoRef,startVideo,leaveRoom} = useContext(AppContext);\r\n\r\n    useEffect(() => {\r\n        if(!state.token){\r\n            return;\r\n        }\r\n        if(!state.activeRoom){\r\n            startVideo();\r\n        }\r\n    },[state,startVideo]);\r\n\r\n    return  <div style={{position:'relative',overflow:'auto',width:'100%'}}>\r\n            <div ref={videoRef}  style={{display:'flex',flexWrap:\"wrap\",justifyContent:'center',padding:'1rem'}}/>\r\n            {state.activeRoom &&\r\n            <Button\r\n                variant=\"outlined\"\r\n                style={{position:'absolute',top:10,right:10,color:'#FBCF14',backgroundColor:'rgba(0,0,0,0.3)'}}\r\n                startIcon={<ExitToAppOutlinedIcon />} onClick={() => leaveRoom()}>\r\n                Leave Room\r\n            </Button>\r\n            }\r\n            {!state.activeRoom &&\r\n                <div style={{textAlign:'center'}}>\r\n                    <CircularProgress size={'3rem'} style={{color:'#FBCF14'}} />\r\n                </div>\r\n            }\r\n        </div>\r\n}\r\n","import React from 'react';\nimport LoginScreen from \"./comp/LoginScreen\";\nimport AppContextProvider from \"./AppContext\";\nimport HomeScreen from \"./comp/HomeScreen\";\n\n/**\n * App is the main component that becomes the root of this application.\n * The App component has an AppContextProvider which will render the HomeScreen or LoginScreen component.\n * @returns {*}\n * @constructor\n */\nfunction App() {\n    return (\n        <AppContextProvider>\n            {(state) => (\n            <div className=\"App\">\n                <div style={{display: 'flex',height:'100%'}}>\n                    {state.token ? <HomeScreen /> : <LoginScreen/>}\n                </div>\n            </div>)}\n        </AppContextProvider>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}